<!DOCTYPE html>
<html lang="de">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-title" content="Lehsetreff" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="description" content="Let's lehs with the community!" />
    <meta property="og:image" content="/Lehsetreff.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="manifest" href="/manifest.json" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
      let newWorker;
      let refreshing;
      let hasBadge = false;
      if ("setAppBadge" in navigator && "clearAppBadge" in navigator) {
        hasBadge = true;
      }
      function notify() {
        if (hasBadge) {
          var count = 0;
          $(".badge").each(function (index, item) {
            if (this.innerText === "1") {
              count++;
            }
          });
          navigator.setAppBadge(count).catch((error) => {
            console.log("error setting badge");
          });
          const canVibrate = window.navigator.vibrate;
          if (canVibrate) {
            navigator.vibrate(200);
          }
        }
      }
      function deleteNotification() {
        if (hasBadge) {
          navigator.clearAppBadge().catch((error) => {
            console.log("error deleting badge");
          });
        }
      }
      function reload() {
        console.log(newWorker);
        newWorker.postMessage({
          action: "skipWaiting",
        });
      }
      navigator.serviceWorker.addEventListener("controllerchange", function () {
        if (refreshing) return;
        window.location.reload();
        refreshing = true;
      });
      if ("serviceWorker" in navigator) {
        // Register the service worker
        navigator.serviceWorker.register("/service-worker.js").then((reg) => {
          reg.addEventListener("updatefound", () => {
            // An updated service worker has appeared in reg.installing!
            newWorker = reg.installing;
            newWorker.addEventListener("statechange", () => {
              // Has service worker state changed?
              switch (newWorker.state) {
                case "installed":
                  // There is a new service worker available, show the notification
                  if (navigator.serviceWorker.controller) {
                    $("#notification").css("z-index", "999");
                    $("#notification").addClass("show");
                    // alert("Neue Version verf√ºgbar.");
                    // reload();
                  }
                  break;
              }
            });
          });
        });
      }
    </script>

    <link rel="stylesheet" href="/halfmoon-1.1.1/css/halfmoon.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <link rel="stylesheet" href="/styles.css" />

    <title>Lehsetreff</title>
  </head>
  <!-- <body data-set-preferred-mode-onload="true"> -->
  <body>
    <div
      class="page-wrapper with-navbar with-sidebar with-navbar-fixed-bottom"
      data-sidebar-type="full-height"
    >
      <!-- Navbar -->
      <nav class="navbar">
        <!-- Navbar content (with toggle sidebar button) -->
        <div class="navbar-content">
          <button
            id="toggle-sidebar-btn"
            class="btn btn-action"
            type="button"
            onclick="halfmoon.toggleSidebar()"
          >
            <i class="fa fa-bars" aria-hidden="true"></i>
          </button>
        </div>
        <!-- Navbar brand -->
        <a href="/" class="navbar-brand" id="applicationCaption">
          <img src="/Lehsetreff.png" alt="..." />
          Lehsetreff
        </a>

        <!-- Navbar text -->
        <span class="navbar-text text-monospace">v1.0 beta</span>
        <!-- text-monospace = font-family shifted to monospace -->
        <!-- Navbar nav -->
        <ul class="navbar-nav d-none d-md-flex">
          <!-- d-none = display: none, d-md-flex = display: flex on medium screens and up (width > 768px) -->
        </ul>
        <!-- Navbar form (inline form) -->
        <form
          class="form-inline d-none d-md-flex ml-auto"
          action="..."
          method="..."
        >
          <!-- d-none = display: none, d-md-flex = display: flex on medium screens and up (width > 768px), ml-auto = margin-left: auto -->
          <input
            type="text"
            class="form-control"
            placeholder="Email address"
            required="required"
          />
          <button class="btn btn-primary" type="submit">Sign up</button>
        </form>
        <!-- Navbar content (with the dropdown menu) -->
        <div class="navbar-content d-md-none ml-auto">
          <!-- d-md-none = display: none on medium screens and up (width > 768px), ml-auto = margin-left: auto -->
          <div class="dropdown with-arrow">
            <button
              class="btn"
              data-toggle="dropdown"
              type="button"
              id="navbar-dropdown-toggle-btn-1"
            >
              Menu
              <i class="fa fa-angle-down" aria-hidden="true"></i>
            </button>
            <div
              class="dropdown-menu dropdown-menu-right w-200"
              aria-labelledby="navbar-dropdown-toggle-btn-1"
            >
              <!-- w-200 = width: 20rem (200px) -->
              <a href="#" class="dropdown-item">Docs</a>
              <a href="#" class="dropdown-item">Products</a>
              <div class="dropdown-divider"></div>
              <div class="dropdown-content">
                <form action="..." method="...">
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Email address"
                      required="required"
                    />
                  </div>
                  <button class="btn btn-primary btn-block" type="submit">
                    Sign up
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <div class="sidebar">
        <div class="sidebar-menu">
          <h5 class="sidebar-title">Profil</h5>
          <div class="sidebar-divider"></div>
          <br />
          <h5 class="sidebar-title">Threads</h5>
          <div class="sidebar-divider" id="sidebarThreadGroups"></div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="content">
          <nav aria-label="Breadcrumb navigation example">
            <ul class="breadcrumb" id="breadcrumb"></ul>
          </nav>

          <div id="threadView">
            <h2 class="content-title">Thread</h2>
          </div>
          <div id="threadGroupView">
            <h2 class="content-title">ThreadGroup</h2>
          </div>

          <div id="homeView">
            <h2 class="content-title">Willkommen</h2>

            <p id="message">Hello Guest!</p>
            <p id="userName"></p>
            <br />

            <form onsubmit="return false">
              <div class="input-group">
                <input
                  id="keyInput"
                  type="text"
                  class="form-control"
                  placeholder="apiKey"
                  aria-label="apiKey"
                  aria-describedby="basic-addon2"
                />
                <div class="input-group-append">
                  <input
                    type="submit"
                    class="input-group-text"
                    id="testButton"
                    class="btn btn-primary"
                    value="Test"
                  />
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Requires halfmoon.js for the dropdowns -->
    <script src="/halfmoon-1.1.1/js/halfmoon.js"></script>
    <script src="/script.js"></script>
  </body>
</html>
